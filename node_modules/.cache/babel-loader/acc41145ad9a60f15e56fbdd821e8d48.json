{"ast":null,"code":"import axios from 'axios';\nimport { startOfMonth, endOfMonth } from 'date-fns';\nimport { map, forEach } from 'lodash';\nimport Constants from '../../../utils/constants';\nexport var Months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\nexport var tacticalActions = {\n  SET_MONTH: 'SET_MONTH',\n  SET_YEAR: 'SET_YEAR',\n  SET_COST: 'SET_COST',\n  SET_PRODUCTION: 'SET_PRODUCTION',\n  SET_PRODUCTION_ORDERS: 'SET_PRODUCTION_ORDERS'\n};\nexport var setMonth = function setMonth(cost) {\n  return {\n    type: tacticalActions.SET_MONTH,\n    payload: cost\n  };\n};\nexport var setYear = function setYear(cost) {\n  return {\n    type: tacticalActions.SET_YEAR,\n    payload: cost\n  };\n};\nexport var setCost = function setCost(cost) {\n  return {\n    type: tacticalActions.SET_COST,\n    payload: cost\n  };\n};\nexport var setProduction = function setProduction(production) {\n  return {\n    type: tacticalActions.SET_PRODUCTION,\n    payload: production\n  };\n};\nexport var setProductionOrders = function setProductionOrders(orders) {\n  return {\n    type: tacticalActions.SET_PRODUCTION_ORDERS,\n    payload: orders\n  };\n};\nexport var fetchCostRawMaterial = function fetchCostRawMaterial() {\n  var value = axios.get(\"\".concat(Constants.Financial_API.address).concat(Constants.Financial_API.routes.CustoMateriaPrima)).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    console.log(error);\n    return 0;\n  });\n  return value;\n};\nexport var fetchProdOrders = function fetchProdOrders(month, year) {\n  var start = startOfMonth(new Date(\"\".concat(year, \"-\").concat(month, \"-01\")));\n  var end = endOfMonth(new Date(\"\".concat(year, \"-\").concat(month, \"-01\")));\n  var value = axios.get(\"\".concat(Constants.Sales_API.address).concat(Constants.Sales_API.routes.Pedidos, \"?\").concat(Constants.URL.inicio, \"=\").concat(start, \"&\").concat(Constants.URL.fim, \"=\").concat(end)).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n  return value;\n};\nexport var fetchProduction = function fetchProduction(month, year) {\n  var Production_API = Constants.Production_API,\n      URL = Constants.URL;\n  var month_name = getMonthName(month);\n  var value = axios.get(\"\".concat(Production_API.address).concat(Production_API.routes.getAllProducaoPorMesTurno)).then(function (response) {\n    return getProductionByMonth(month_name, response.data);\n  }).catch(function (error) {\n    console.log(error);\n    return [];\n  });\n  return value;\n};\nexport var getMonthName = function getMonthName(value) {\n  forEach(Months, function (month, index) {\n    if (index == value) {\n      return month;\n    }\n  });\n  return '';\n};\nexport var processProductionsOrders = function processProductionsOrders(production_orders) {\n  var quant_total = 0;\n  forEach(production_orders, function (order, index) {\n    quant_total += order.quantidade;\n  });\n  return quant_total;\n};\n\nvar getProductionByMonth = function getProductionByMonth(month, productions) {\n  var all = map(productions, function (production, index) {\n    if (production.mes == month) {\n      return production;\n    }\n  });\n  return all;\n};","map":{"version":3,"sources":["D:\\Documents\\React\\my-front-production\\src\\redux\\actions\\pages\\tactical.ts"],"names":["axios","startOfMonth","endOfMonth","map","forEach","Constants","Months","tacticalActions","SET_MONTH","SET_YEAR","SET_COST","SET_PRODUCTION","SET_PRODUCTION_ORDERS","setMonth","cost","type","payload","setYear","setCost","setProduction","production","setProductionOrders","orders","fetchCostRawMaterial","value","get","Financial_API","address","routes","CustoMateriaPrima","then","response","data","catch","error","console","log","fetchProdOrders","month","year","start","Date","end","Sales_API","Pedidos","URL","inicio","fim","fetchProduction","Production_API","month_name","getMonthName","getAllProducaoPorMesTurno","getProductionByMonth","index","processProductionsOrders","production_orders","quant_total","order","quantidade","productions","all","mes"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,UAAvB,QAAiD,UAAjD;AAEA,SAASC,GAAT,EAAcC,OAAd,QAA6B,QAA7B;AAKA,OAAOC,SAAP,MAAsB,0BAAtB;AAGA,OAAO,IAAMC,MAAgB,GAAI,CAAC,SAAD,EAAY,WAAZ,EAAyB,OAAzB,EAAkC,OAAlC,EAA2C,MAA3C,EAAmD,OAAnD,EAA4D,OAA5D,EAAqE,QAArE,EAA+E,UAA/E,EAA2F,SAA3F,EAAsG,UAAtG,EAAkH,UAAlH,CAA1B;AAEP,OAAO,IAAMC,eAAe,GAAG;AAC3BC,EAAAA,SAAS,EAAE,WADgB;AAE3BC,EAAAA,QAAQ,EAAE,UAFiB;AAG3BC,EAAAA,QAAQ,EAAE,UAHiB;AAI3BC,EAAAA,cAAc,EAAE,gBAJW;AAK3BC,EAAAA,qBAAqB,EAAE;AALI,CAAxB;AAQP,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD;AAAA,SAAmB;AAEvCC,IAAAA,IAAI,EAAER,eAAe,CAACC,SAFiB;AAGvCQ,IAAAA,OAAO,EAAEF;AAH8B,GAAnB;AAAA,CAAjB;AAMP,OAAO,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAACH,IAAD;AAAA,SAAmB;AAEtCC,IAAAA,IAAI,EAAER,eAAe,CAACE,QAFgB;AAGtCO,IAAAA,OAAO,EAAEF;AAH6B,GAAnB;AAAA,CAAhB;AAMP,OAAO,IAAMI,OAAO,GAAG,SAAVA,OAAU,CAACJ,IAAD;AAAA,SAAmB;AAEtCC,IAAAA,IAAI,EAAER,eAAe,CAACG,QAFgB;AAGtCM,IAAAA,OAAO,EAAEF;AAH6B,GAAnB;AAAA,CAAhB;AAMP,OAAO,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,CAACC,UAAD;AAAA,SAAsD;AAC/EL,IAAAA,IAAI,EAAER,eAAe,CAACI,cADyD;AAE/EK,IAAAA,OAAO,EAAEI;AAFsE,GAAtD;AAAA,CAAtB;AAKP,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD;AAAA,SAAyC;AAExEP,IAAAA,IAAI,EAAER,eAAe,CAACK,qBAFkD;AAGxEI,IAAAA,OAAO,EAAEM;AAH+D,GAAzC;AAAA,CAA5B;AAMP,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AAEtC,MAAMC,KAAsB,GAAGxB,KAAK,CAACyB,GAAN,WAAapB,SAAS,CAACqB,aAAV,CAAwBC,OAArC,SAA+CtB,SAAS,CAACqB,aAAV,CAAwBE,MAAxB,CAA+BC,iBAA9E,GAC9BC,IAD8B,CACzB,UAACC,QAAD;AAAA,WAAcA,QAAQ,CAACC,IAAvB;AAAA,GADyB,EAE9BC,KAF8B,CAExB,UAACC,KAAD,EAAW;AAAEC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAAoB,WAAO,CAAP;AAAU,GAFnB,CAA/B;AAIA,SAAOV,KAAP;AACH,CAPM;AASP,OAAO,IAAMa,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAgBC,IAAhB,EAAiC;AAE5D,MAAMC,KAAK,GAAGvC,YAAY,CAAC,IAAIwC,IAAJ,WAAYF,IAAZ,cAAoBD,KAApB,SAAD,CAA1B;AACA,MAAMI,GAAG,GAAGxC,UAAU,CAAC,IAAIuC,IAAJ,WAAYF,IAAZ,cAAoBD,KAApB,SAAD,CAAtB;AAEA,MAAMd,KAA0C,GAAGxB,KAAK,CAACyB,GAAN,WAAapB,SAAS,CAACsC,SAAV,CAAoBhB,OAAjC,SAA2CtB,SAAS,CAACsC,SAAV,CAAoBf,MAApB,CAA2BgB,OAAtE,cAAiFvC,SAAS,CAACwC,GAAV,CAAcC,MAA/F,cAAyGN,KAAzG,cAAkHnC,SAAS,CAACwC,GAAV,CAAcE,GAAhI,cAAuIL,GAAvI,GAClDZ,IADkD,CAC7C,UAACC,QAAD;AAAA,WAAcA,QAAQ,CAACC,IAAvB;AAAA,GAD6C,EAElDC,KAFkD,CAE5C,UAACC,KAAD,EAAW;AAAEC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAAoB,WAAO,EAAP;AAAW,GAFA,CAAnD;AAIA,SAAOV,KAAP;AACH,CAVM;AAYP,OAAO,IAAMwB,eAAe,GAAG,SAAlBA,eAAkB,CAACV,KAAD,EAAgBC,IAAhB,EAAiC;AAAA,MAEpDU,cAFoD,GAE5B5C,SAF4B,CAEpD4C,cAFoD;AAAA,MAEpCJ,GAFoC,GAE5BxC,SAF4B,CAEpCwC,GAFoC;AAI5D,MAAMK,UAAkB,GAAGC,YAAY,CAACb,KAAD,CAAvC;AAEA,MAAMd,KAAoD,GAAGxB,KAAK,CAACyB,GAAN,WAAawB,cAAc,CAACtB,OAA5B,SAAsCsB,cAAc,CAACrB,MAAf,CAAsBwB,yBAA5D,GAC5DtB,IAD4D,CACvD,UAACC,QAAD;AAAA,WAAcsB,oBAAoB,CAACH,UAAD,EAAanB,QAAQ,CAACC,IAAtB,CAAlC;AAAA,GADuD,EAE5DC,KAF4D,CAEtD,UAACC,KAAD,EAAW;AAAEC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAAoB,WAAO,EAAP;AAAW,GAFU,CAA7D;AAIA,SAAOV,KAAP;AACH,CAXM;AAaP,OAAO,IAAM2B,YAAY,GAAG,SAAfA,YAAe,CAAC3B,KAAD,EAA2B;AAEnDpB,EAAAA,OAAO,CAACE,MAAD,EAAS,UAACgC,KAAD,EAAgBgB,KAAhB,EAAkC;AAE9C,QAAIA,KAAK,IAAI9B,KAAb,EAAoB;AAEhB,aAAOc,KAAP;AACH;AACJ,GANM,CAAP;AAQA,SAAO,EAAP;AACH,CAXM;AAaP,OAAO,IAAMiB,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,iBAAD,EAAwD;AAE5F,MAAIC,WAAmB,GAAG,CAA1B;AAEArD,EAAAA,OAAO,CAACoD,iBAAD,EAAoB,UAACE,KAAD,EAAkCJ,KAAlC,EAAoD;AAE3EG,IAAAA,WAAW,IAAIC,KAAK,CAACC,UAArB;AACH,GAHM,CAAP;AAKA,SAAOF,WAAP;AACH,CAVM;;AAYP,IAAMJ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACf,KAAD,EAAgBsB,WAAhB,EAA4F;AAErH,MAAMC,GAAwC,GAAG1D,GAAG,CAACyD,WAAD,EAAc,UAACxC,UAAD,EAAkCkC,KAAlC,EAAoD;AAElH,QAAIlC,UAAU,CAAC0C,GAAX,IAAkBxB,KAAtB,EAA6B;AAEzB,aAAOlB,UAAP;AACH;AACJ,GANmD,CAApD;AAQA,SAAOyC,GAAP;AACH,CAXD","sourcesContent":["import axios from 'axios'\r\nimport { startOfMonth, endOfMonth, format } from 'date-fns'\r\n\r\nimport { map, forEach } from 'lodash'\r\n\r\nimport { OptionInterface } from './../../../interfaces/option'\r\nimport { ProductionOrderInterface } from '../../../interfaces/production_order'\r\n\r\nimport Constants from '../../../utils/constants'\r\nimport { ProductionInterface } from '../../../interfaces/production';\r\n\r\nexport const Months: string[] =  ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']\r\n\r\nexport const tacticalActions = {\r\n    SET_MONTH: 'SET_MONTH',\r\n    SET_YEAR: 'SET_YEAR',\r\n    SET_COST: 'SET_COST',\r\n    SET_PRODUCTION: 'SET_PRODUCTION',\r\n    SET_PRODUCTION_ORDERS: 'SET_PRODUCTION_ORDERS',\r\n}\r\n\r\nexport const setMonth = (cost: number) => ({\r\n    \r\n    type: tacticalActions.SET_MONTH,\r\n    payload: cost,\r\n})\r\n\r\nexport const setYear = (cost: number) => ({\r\n    \r\n    type: tacticalActions.SET_YEAR,\r\n    payload: cost,\r\n})\r\n\r\nexport const setCost = (cost: number) => ({\r\n    \r\n    type: tacticalActions.SET_COST,\r\n    payload: cost,\r\n})\r\n\r\nexport const setProduction = (production: (ProductionInterface | undefined)[]) => ({\r\n    type: tacticalActions.SET_PRODUCTION,\r\n    payload: production,\r\n})\r\n\r\nexport const setProductionOrders = (orders: ProductionOrderInterface[]) => ({\r\n\r\n    type: tacticalActions.SET_PRODUCTION_ORDERS,\r\n    payload: orders,\r\n})\r\n\r\nexport const fetchCostRawMaterial = () => {\r\n\r\n    const value: Promise<number> = axios.get(`${Constants.Financial_API.address}${Constants.Financial_API.routes.CustoMateriaPrima}`)\r\n    .then((response) => response.data)\r\n    .catch((error) => { console.log(error); return 0 })\r\n\r\n    return value\r\n}\r\n\r\nexport const fetchProdOrders = (month: number, year: number) => {\r\n\r\n    const start = startOfMonth(new Date(`${year}-${month}-01`))\r\n    const end = endOfMonth(new Date(`${year}-${month}-01`))\r\n\r\n    const value: Promise<ProductionOrderInterface[]> = axios.get(`${Constants.Sales_API.address}${Constants.Sales_API.routes.Pedidos}?${Constants.URL.inicio}=${start}&${Constants.URL.fim}=${end}`)\r\n    .then((response) => response.data)\r\n    .catch((error) => { console.log(error); return [] })\r\n\r\n    return value\r\n}\r\n\r\nexport const fetchProduction = (month: number, year: number) => {\r\n    \r\n    const { Production_API, URL } = Constants\r\n\r\n    const month_name: string = getMonthName(month)\r\n\r\n    const value: Promise<(ProductionInterface | undefined )[]> = axios.get(`${Production_API.address}${Production_API.routes.getAllProducaoPorMesTurno}`)\r\n    .then((response) => getProductionByMonth(month_name, response.data))\r\n    .catch((error) => { console.log(error); return [] })\r\n\r\n    return value\r\n}\r\n\r\nexport const getMonthName = (value: number): string => {\r\n\r\n    forEach(Months, (month: string, index: number) => {\r\n        \r\n        if (index == value) {\r\n\r\n            return month\r\n        }\r\n    })\r\n\r\n    return ''\r\n}\r\n\r\nexport const processProductionsOrders = (production_orders: Array<ProductionOrderInterface>) => {\r\n\r\n    let quant_total: number = 0\r\n\r\n    forEach(production_orders, (order: ProductionOrderInterface, index: number) => {\r\n        \r\n        quant_total += order.quantidade\r\n    })\r\n\r\n    return quant_total\r\n}\r\n\r\nconst getProductionByMonth = (month: string, productions: ProductionInterface[]): (ProductionInterface | undefined)[] => {\r\n\r\n    const all: (ProductionInterface | undefined)[] = map(productions, (production: ProductionInterface, index: number) => {\r\n\r\n        if (production.mes == month) {\r\n\r\n            return production\r\n        }\r\n    })\r\n\r\n    return all\r\n}"]},"metadata":{},"sourceType":"module"}